---
import '../styles/globals.css';
import '../styles/design-system-optimized.css';
import '../styles/animations.css';
import OptimizedFooter from '../components/OptimizedFooter.astro';

export interface Props {
  title: string;
  description?: string;
  image?: string;
  type?: 'website' | 'article' | 'product';
  noindex?: boolean;
}

const {
  title,
  description = "EurekaArchiTech - Innovación estructurada para la era digital. Servicios de consultoría digital especializados que transforman empresas con soluciones tecnológicas avanzadas.",
  image = "/favicon.svg",
  type = "website",
  noindex = false
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const socialImageURL = new URL(image, Astro.url);
---

<!doctype html>
<html lang="es-MX" dir="ltr">
  <head>
    <!-- Critical Meta -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Performance Optimizations -->
    <meta name="theme-color" content="#00E5A0" />
    <meta name="color-scheme" content="dark" />
    <link rel="preload" href="/ELogo.png" as="image" type="image/png" fetchpriority="high" />
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- Enhanced Typography -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
    
    <!-- Enhanced Critical CSS with Refined Colors -->
    <style>
      /* 🎨 Refined Enterprise Color System */
      :root {
        /* Core Enterprise Palette */
        --slate-950: #0F0F23;     /* Deep enterprise navy */
        --slate-900: #1A1A2E;     /* Rich dark background */
        --slate-800: #2D2D44;     /* Elevated surfaces */
        --slate-700: #404057;     /* Subtle borders */
        --slate-600: #6B6B80;     /* Muted elements */
        --slate-500: #9999B3;     /* Secondary text */
        --slate-400: #BFBFCC;     /* Primary text muted */
        --slate-300: #D4D4E6;     /* Light text */
        --slate-200: #E8E8F0;     /* Very light */
        --slate-100: #F4F4F7;     /* Surface highlights */
        --slate-50: #FAFAFA;      /* Pure highlights */
        
        /* Sophisticated Accent Colors */
        --emerald-500: #00D4AA;   /* Primary tech emerald */
        --emerald-400: #1ADBB5;   /* Lighter emerald */
        --emerald-300: #4DE2C7;   /* Soft emerald */
        --emerald-600: #00B894;   /* Deeper emerald */
        --emerald-700: #00A085;   /* Dark emerald */
        
        --sapphire-500: #0066FF;  /* Professional sapphire */
        --sapphire-400: #3380FF;  /* Light sapphire */
        --sapphire-600: #0052CC;  /* Deep sapphire */
        --sapphire-700: #003D99;  /* Darker sapphire */
        
        --amber-500: #FFB020;     /* Warm accent */
        --amber-400: #FFC453;     /* Light amber */
        --amber-600: #E6991C;     /* Deep amber */
        
        /* Semantic Refined Colors */
        --success: #00C896;       /* Success emerald */
        --warning: #FF8C42;       /* Sophisticated orange */
        --error: #FF5757;         /* Modern red */
        --info: #4A90E2;          /* Professional blue */
        
        /* Surface & Glass Effects */
        --glass-primary: rgba(26, 26, 46, 0.85);
        --glass-secondary: rgba(45, 45, 68, 0.75);
        --glass-accent: rgba(0, 212, 170, 0.08);
        --glass-border: rgba(255, 255, 255, 0.08);
        
        /* Shadows & Glows */
        --shadow-soft: 0 4px 20px rgba(15, 15, 35, 0.3);
        --shadow-medium: 0 8px 40px rgba(15, 15, 35, 0.4);
        --shadow-strong: 0 16px 60px rgba(15, 15, 35, 0.5);
        --glow-emerald: 0 0 30px rgba(0, 212, 170, 0.3);
        --glow-sapphire: 0 0 30px rgba(0, 102, 255, 0.3);
      }
      
      /* Enhanced Body Styles */
      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(145deg, var(--slate-950) 0%, var(--slate-900) 100%);
        color: var(--slate-100);
        margin: 0;
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        font-feature-settings: 'liga', 'kern';
      }
      
      /* Refined Hero Container */
      .hero-container {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: 
          radial-gradient(circle at 25% 25%, rgba(0, 212, 170, 0.03) 0%, transparent 50%),
          radial-gradient(circle at 75% 75%, rgba(0, 102, 255, 0.02) 0%, transparent 50%),
          linear-gradient(145deg, var(--slate-950) 0%, var(--slate-900) 100%);
        position: relative;
        overflow: hidden;
      }
      
      /* Logo Optimization */
      img[src="/ELogo.png"] {
        width: 80px;
        height: 80px;
        object-fit: contain;
      }
      
      /* Performance Optimizations */
      * {
        box-sizing: border-box;
      }
      
      .gpu-layer {
        transform: translateZ(0);
        will-change: transform;
      }
    </style>
    
    <!-- SEO & Social -->
    <title>{title}</title>
    <link rel="canonical" href={canonicalURL} />
    {noindex && <meta name="robots" content="noindex, nofollow" />}
    
    <!-- Open Graph -->
    <meta property="og:type" content={type} />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={socialImageURL} />
    <meta property="og:site_name" content="EurekaArchiTech" />
    <meta property="og:locale" content="es_MX" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={socialImageURL} />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "EurekaArchiTech",
      "url": "https://eureka-products-services.vercel.app",
      "logo": "https://eureka-products-services.vercel.app/ELogo.png",
      "description": "Servicios de consultoría digital especializados que transforman empresas con soluciones tecnológicas innovadoras.",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "MX"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "email": "hi@eureka-architech.com",
        "contactType": "customer service"
      }
    }
    </script>
    
    <!-- Optimized Font Loading -->
    <link 
      rel="preload" 
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" 
      as="style" 
      onload="this.onload=null;this.rel='stylesheet'" 
    />
    <noscript>
      <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    </noscript>
  </head>
  
  <body>
    <!-- Page Loading Indicator -->
    <div class="page-loading-indicator" id="page-loading-indicator"></div>
    
    <!-- Skip to content - Accessibility -->
    <a href="#main-content" class="sr-only focus-visible">
      Ir al contenido principal
    </a>
    
    <!-- Enhanced Header with scroll effects -->
    <header class="header-optimized" id="main-header">
      <nav class="container flex items-center justify-between py-5 lg:py-7">
        <!-- Enhanced Brand Identity -->
        <a href="/" class="brand-container group" id="brand-logo">
          <div class="brand-logo-wrapper">
            <img 
              src="/ELogo.png" 
              alt="EurekaArchiTech Logo" 
              class="brand-logo-img"
              width="56"
              height="56"
              loading="eager"
              fetchpriority="high"
            />
            <div class="logo-glow-effect"></div>
          </div>
          <div class="brand-text-container">
            <span class="brand-name">EurekaArchiTech</span>
            <div class="brand-slogan">Innovación Estructurada</div>
          </div>
        </a>
        
        <!-- Desktop Navigation -->
        <div class="desktop-nav hidden lg:flex items-center gap-4 xl:gap-6">
          <a href="/" class="nav-link" data-page="inicio">
            <svg class="w-4 h-4 mr-2 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
            </svg>
            Inicio
          </a>
          <a href="/servicios" class="nav-link" data-page="servicios">
            <svg class="w-4 h-4 mr-2 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
            </svg>
            Servicios
          </a>
          <a href="/nosotros" class="nav-link" data-page="nosotros">
            <svg class="w-4 h-4 mr-2 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
            </svg>
            Nosotros
          </a>
          <a href="/contacto" class="nav-link" data-page="contacto">
            <svg class="w-4 h-4 mr-2 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l4.9 3.1M21 8l-4.9 3.1M3 8a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2V8z"></path>
            </svg>
            Contacto
          </a>
          <div class="nav-separator"></div>
          <a href="/contacto" class="btn btn-primary btn-base hover-glow">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.965 8.965 0 01-4.126-1.004L3 21l1.996-5.874A8.965 8.965 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"></path>
            </svg>
            Análisis Estratégico
          </a>
        </div>
        
        <!-- Mobile menu button with enhanced touch targets -->
        <button 
          class="mobile-menu-btn"
          id="mobile-menu-btn"
          aria-label="Abrir menú"
          aria-expanded="false"
        >
          <svg class="w-6 h-6 text-primary transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" class="menu-icon"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="close-icon hidden"></path>
          </svg>
        </button>
      </nav>
      
      <!-- Enhanced Mobile menu -->
      <div class="hidden mobile-menu-container" id="mobile-menu">
        <div class="container py-6 border-t border-primary-700">
          <div class="flex flex-col gap-3">
            <a href="/" class="nav-link-mobile" data-page="inicio">
              <svg class="w-5 h-5 mr-3 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
              </svg>
              Inicio
            </a>
            <a href="/servicios" class="nav-link-mobile" data-page="servicios">
              <svg class="w-5 h-5 mr-3 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
              </svg>
              Servicios
            </a>
            <a href="/nosotros" class="nav-link-mobile" data-page="nosotros">
              <svg class="w-5 h-5 mr-3 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
              </svg>
              Nosotros
            </a>
            <a href="/contacto" class="nav-link-mobile" data-page="contacto">
              <svg class="w-5 h-5 mr-3 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l4.9 3.1M21 8l-4.9 3.1M3 8a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2V8z"></path>
              </svg>
              Contacto
            </a>
            <div class="mobile-cta-container">
              <a href="/contacto" class="mobile-cta-btn">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.965 8.965 0 01-4.126-1.004L3 21l1.996-5.874A8.965 8.965 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"></path>
                </svg>
                Análisis Estratégico
              </a>
            </div>
          </div>
        </div>
      </div>
    </header>
    
    <!-- Main content -->
    <main id="main-content">
      <slot />
    </main>
    
    <!-- Optimized Footer -->
    <OptimizedFooter />
    
    <!-- Enhanced JavaScript with UX improvements and Loading Intelligence -->
    <script>
      // Advanced Loading System
      class LoadingManager {
        constructor() {
          this.pageIndicator = document.getElementById('page-loading-indicator');
          this.loadingStates = new Map();
          this.init();
        }

        init() {
          this.setupPageLoading();
          this.setupContentLoading();
          this.setupImageLoading();
        }

        setupPageLoading() {
          // Show loading on navigation
          window.addEventListener('beforeunload', () => {
            this.showPageLoading();
          });

          // Hide loading when page is fully loaded
          window.addEventListener('load', () => {
            setTimeout(() => this.hidePageLoading(), 300);
          });

          // Handle link clicks for smooth transitions
          document.addEventListener('click', (e) => {
            const link = e.target.closest('a[href]');
            if (link && !link.href.startsWith('#') && link.hostname === window.location.hostname) {
              this.showPageLoading();
            }
          });
        }

        setupContentLoading() {
          // Apply smart fade-in to elements without explicit loading states
          const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const element = entry.target;
                element.classList.add('smart-fade-in');
                observer.unobserve(element);
              }
            });
          }, { threshold: 0.1, rootMargin: '50px' });

          // Observe elements that should have loading animations
          document.querySelectorAll('.card, .service-preview-card, .success-stories__metric').forEach(el => {
            if (!el.classList.contains('animate-fade-in') && !el.classList.contains('smart-fade-in')) {
              observer.observe(el);
            }
          });
        }

        setupImageLoading() {
          // Progressive image loading
          document.querySelectorAll('img').forEach(img => {
            if (img.complete) {
              img.classList.add('loaded');
            } else {
              img.addEventListener('load', () => {
                img.classList.add('loaded');
              });
            }
          });
        }

        showPageLoading() {
          if (this.pageIndicator) {
            this.pageIndicator.classList.add('active');
          }
        }

        hidePageLoading() {
          if (this.pageIndicator) {
            this.pageIndicator.classList.remove('active');
            // Add completion effect
            setTimeout(() => {
              this.pageIndicator.style.transform = 'scaleX(1)';
              setTimeout(() => {
                this.pageIndicator.style.transform = 'scaleX(0)';
              }, 200);
            }, 100);
          }
        }

        // Method to add skeleton loading to containers
        addSkeletonLoading(container, type = 'text') {
          const skeleton = document.createElement('div');
          skeleton.className = `skeleton-loader skeleton-${type}`;
          container.appendChild(skeleton);
          return skeleton;
        }

        // Method to remove skeleton and show content
        showContent(container) {
          const skeletons = container.querySelectorAll('.skeleton-loader');
          skeletons.forEach(skeleton => {
            skeleton.style.opacity = '0';
            setTimeout(() => skeleton.remove(), 300);
          });
          
          container.classList.add('content-loading');
          requestAnimationFrame(() => {
            container.classList.add('loaded');
          });
        }
      }

      // Initialize loading manager
      const loadingManager = new LoadingManager();

      document.addEventListener('DOMContentLoaded', () => {
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const header = document.getElementById('main-header');
        const brandLogo = document.getElementById('brand-logo');
        
        // Enhanced mobile menu functionality
        if (mobileMenuBtn && mobileMenu) {
          // Función para cerrar el menú
          function closeMobileMenu() {
            mobileMenu.classList.add('hidden');
            const menuIcon = mobileMenuBtn.querySelector('.menu-icon');
            const closeIcon = mobileMenuBtn.querySelector('.close-icon');
            const svg = mobileMenuBtn.querySelector('svg');
            
            if (menuIcon) menuIcon.classList.remove('hidden');
            if (closeIcon) closeIcon.classList.add('hidden');
            mobileMenuBtn.setAttribute('aria-label', 'Abrir menú');
            mobileMenuBtn.setAttribute('aria-expanded', 'false');
            
            if (svg) {
              svg.style.transform = 'rotate(0deg) scale(1)';
              svg.style.filter = 'drop-shadow(0 2px 4px rgba(0, 212, 170, 0.3))';
            }
            mobileMenuBtn.style.background = 'rgba(0, 212, 170, 0.08)';
            mobileMenuBtn.style.borderColor = 'rgba(0, 212, 170, 0.15)';
            mobileMenuBtn.style.boxShadow = 'none';
          }

          // Función para abrir el menú
          function openMobileMenu() {
            mobileMenu.classList.remove('hidden');
            const menuIcon = mobileMenuBtn.querySelector('.menu-icon');
            const closeIcon = mobileMenuBtn.querySelector('.close-icon');
            const svg = mobileMenuBtn.querySelector('svg');
            
            if (menuIcon) menuIcon.classList.add('hidden');
            if (closeIcon) closeIcon.classList.remove('hidden');
            mobileMenuBtn.setAttribute('aria-label', 'Cerrar menú');
            mobileMenuBtn.setAttribute('aria-expanded', 'true');
            
            if (svg) {
              svg.style.transform = 'rotate(180deg) scale(1.1)';
              svg.style.filter = 'drop-shadow(0 4px 12px rgba(0, 212, 170, 0.5))';
            }
            mobileMenuBtn.style.background = 'rgba(0, 212, 170, 0.2)';
            mobileMenuBtn.style.borderColor = 'rgba(0, 212, 170, 0.4)';
            mobileMenuBtn.style.boxShadow = '0 8px 25px rgba(0, 212, 170, 0.3)';
          }

          // Evento click del botón
          mobileMenuBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const isOpen = !mobileMenu.classList.contains('hidden');
            
            if (isOpen) {
              closeMobileMenu();
            } else {
              openMobileMenu();
            }
          });

          // Cerrar menú al hacer click fuera
          document.addEventListener('click', (e) => {
            if (!mobileMenu.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
              closeMobileMenu();
            }
          });

          // Cerrar menú en desktop
          function handleResize() {
            if (window.innerWidth >= 1024) {
              closeMobileMenu();
            }
          }

          window.addEventListener('resize', handleResize);
          
          // Cerrar al iniciar si es desktop
          handleResize();
        }
        
        // Close mobile menu when clicking on links
        if (mobileMenuBtn && mobileMenu) {
          const mobileLinks = document.querySelectorAll('#mobile-menu a');
          mobileLinks.forEach(link => {
            link.addEventListener('click', () => {
              // Usar la función closeMobileMenu definida arriba
              mobileMenu.classList.add('hidden');
              const menuIcon = mobileMenuBtn.querySelector('.menu-icon');
              const closeIcon = mobileMenuBtn.querySelector('.close-icon');
              const svg = mobileMenuBtn.querySelector('svg');
              
              if (menuIcon) menuIcon.classList.remove('hidden');
              if (closeIcon) closeIcon.classList.add('hidden');
              mobileMenuBtn.setAttribute('aria-label', 'Abrir menú');
              mobileMenuBtn.setAttribute('aria-expanded', 'false');
              
              if (svg) {
                svg.style.transform = 'rotate(0deg) scale(1)';
                svg.style.filter = 'drop-shadow(0 2px 4px rgba(0, 212, 170, 0.3))';
              }
              mobileMenuBtn.style.background = 'rgba(0, 212, 170, 0.08)';
              mobileMenuBtn.style.borderColor = 'rgba(0, 212, 170, 0.15)';
              mobileMenuBtn.style.boxShadow = 'none';
            });
          });
        }
        
        // Active page indicator
        function setActiveNavLink() {
          const currentPath = window.location.pathname;
          const navLinks = document.querySelectorAll('[data-page]');
          
          navLinks.forEach(link => {
            link.classList.remove('nav-link-active');
            
            const page = link.getAttribute('data-page');
            const href = link.getAttribute('href');
            
            // Check for active page
            if (
              (currentPath === '/' && page === 'inicio') ||
              (currentPath.includes('/' + page) && page !== 'inicio') ||
              currentPath === href
            ) {
              link.classList.add('nav-link-active');
              link.setAttribute('aria-current', 'page');
            } else {
              link.removeAttribute('aria-current');
            }
          });
        }
        
        // Scroll effects for header
        let lastScrollY = 0;
        let ticking = false;
        
        function updateHeader() {
          const scrollY = window.scrollY;
          
          if (scrollY > 50) {
            header.classList.add('header-scrolled');
          } else {
            header.classList.remove('header-scrolled');
          }
          
          lastScrollY = scrollY;
          ticking = false;
        }
        
        function requestTick() {
          if (!ticking) {
            requestAnimationFrame(updateHeader);
            ticking = true;
          }
        }
        
        // Scroll listener with throttling
        window.addEventListener('scroll', requestTick, { passive: true });
        
        // Initialize active nav link
        setActiveNavLink();
        
        // Update active nav on navigation (for SPA behavior)
        window.addEventListener('popstate', setActiveNavLink);
        
      });
    </script>
  </body>
</html>

<style>
  /* 🎨 Refined Header System */
  .header-optimized {
    position: sticky;
    top: 0;
    z-index: 50;
    background: var(--glass-primary);
    backdrop-filter: blur(16px) saturate(1.2);
    border-bottom: 1px solid var(--glass-border);
    transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
    min-height: 80px;
  }
  
  .header-scrolled {
    background: var(--glass-secondary);
    backdrop-filter: blur(24px) saturate(1.4);
    border-bottom-color: rgba(0, 212, 170, 0.2);
    min-height: 70px;
  }
  
  
  @media (min-width: 1024px) {
    .header-optimized {
      min-height: 90px;
    }
    
    .header-scrolled {
      min-height: 75px;
    }
  }
  
  /* 🏆 Meticulously Crafted Brand Identity */
  .brand-container {
    display: flex;
    align-items: center;
    gap: 14px;
    text-decoration: none;
    padding: 10px 16px 10px 12px;
    border-radius: 18px;
    position: relative;
    flex-shrink: 0;
    max-width: 320px;
    min-height: 68px;
    background: transparent;
  }

  /* Eliminar completamente efectos de focus y active */
  .brand-container:focus,
  .brand-container:focus-visible,
  .brand-container:active,
  .brand-container:hover:focus,
  .brand-container:hover:active {
    outline: none !important;
    box-shadow: none !important;
    background: transparent !important;
    border: none !important;
    color: inherit !important;
    -webkit-tap-highlight-color: transparent !important;
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    user-select: none !important;
  }
  
  .brand-container:focus .brand-name,
  .brand-container:focus-visible .brand-name,
  .brand-container:active .brand-name {
    color: inherit !important;
    background: linear-gradient(135deg, 
      #FAFBFC 0%, 
      #E2E8F0 25%,
      #F8FAFC 50%,
      #E2E8F0 75%,
      #FAFBFC 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
  }
  
  .brand-container:focus .brand-slogan,
  .brand-container:focus-visible .brand-slogan,
  .brand-container:active .brand-slogan {
    color: inherit !important;
    background: linear-gradient(92deg, 
      #1ADBB5 0%, 
      #00D4AA 30%,
      #3380FF 70%,
      #0066FF 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
  }
  
  
  
  
  
  
  .brand-logo-wrapper {
    position: relative;
    width: 48px;
    height: 48px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 14px;
    background: transparent;
    overflow: hidden;
  }
  
  
  @media (min-width: 1024px) {
    .brand-container {
      gap: 18px; /* Increased gap for desktop breathing room */
      padding: 12px 20px 12px 16px;
      max-width: 360px; /* Optimized for desktop layout */
      min-height: 76px;
    }
    
    .brand-logo-wrapper {
      width: 56px; /* Refined desktop size */
      height: 56px;
      border-radius: 16px;
    }
    
    .brand-logo-wrapper::before {
      border-radius: 16px;
    }
  }
  
  @media (min-width: 1280px) {
    .brand-container {
      gap: 20px;
      padding: 14px 24px 14px 18px;
      max-width: 380px;
      min-height: 80px;
    }
    
    .brand-logo-wrapper {
      width: 60px;
      height: 60px;
      border-radius: 18px;
    }
    
    .brand-logo-wrapper::before {
      border-radius: 18px;
    }
  }
  
  .brand-logo-img {
    width: 32px;
    height: 32px;
    object-fit: contain;
    z-index: 2;
    position: relative;
    transform-origin: center;
  }

  /* Eliminar efectos en el logo al hacer click */
  .brand-container:focus .brand-logo-img,
  .brand-container:focus-visible .brand-logo-img,
  .brand-container:active .brand-logo-img {
    transform: none !important;
    filter: none !important;
    transition: none !important;
  }

  /* Eliminar cualquier efecto de browser por defecto en elementos internos */
  .brand-container *:focus,
  .brand-container *:focus-visible,
  .brand-container *:active {
    outline: none !important;
    box-shadow: none !important;
    background: inherit !important;
    color: inherit !important;
  }

  /* Eliminar efectos en wrapper del logo */
  .brand-container:focus .brand-logo-wrapper,
  .brand-container:focus-visible .brand-logo-wrapper,
  .brand-container:active .brand-logo-wrapper {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
  }
  
  @media (min-width: 1024px) {
    .brand-logo-img {
      width: 36px;
      height: 36px;
    }
  }
  
  @media (min-width: 1280px) {
    .brand-logo-img {
      width: 40px;
      height: 40px;
    }
  }
  
  
  
  
  
  .brand-text-container {
    display: flex;
    flex-direction: column;
    gap: 2px; /* Precise micro-spacing */
    min-width: 0;
    flex: 1;
    padding-top: 1px; /* Optical alignment adjustment */
  }
  
  .brand-name {
    font-size: 1.25rem; /* Refined size for better balance */
    font-weight: 750; /* Custom weight for sophistication */
    background: linear-gradient(135deg, 
      #FAFBFC 0%, 
      #E2E8F0 25%,
      #F8FAFC 50%,
      #E2E8F0 75%,
      #FAFBFC 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    background-size: 200% 100%;
    line-height: 1.1;
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    letter-spacing: -0.02em; /* Precise kerning */
    font-feature-settings: 'liga' 1, 'kern' 1, 'calt' 1;
    text-rendering: optimizeLegibility;
    margin-bottom: 1px; /* Micro-adjustment for optical spacing */
  }
  
  .brand-slogan {
    font-size: 0.6875rem; /* Refined proportional size */
    font-weight: 550; /* Balanced weight */
    background: linear-gradient(92deg, 
      #1ADBB5 0%, 
      #00D4AA 30%,
      #3380FF 70%,
      #0066FF 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    background-size: 180% 100%;
    line-height: 1;
    letter-spacing: 0.095em; /* Precise tracking for caps */
    text-transform: uppercase;
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-top: 3px; /* Precise optical spacing */
    font-feature-settings: 'case' 1, 'kern' 1;
    text-rendering: optimizeLegibility;
    opacity: 0.92; /* Subtle hierarchy */
  }
  
  
  
  @media (min-width: 1024px) {
    .brand-name {
      font-size: 1.375rem; /* Refined desktop scale */
      font-weight: 775;
      letter-spacing: -0.022em;
    }
    
    .brand-slogan {
      font-size: 0.75rem; /* Proportional scaling */
      font-weight: 575;
      letter-spacing: 0.1em;
      margin-top: 4px;
    }
    
    .brand-text-container {
      gap: 3px;
      padding-top: 2px;
    }
  }
  
  @media (min-width: 1280px) {
    .brand-name {
      font-size: 1.4375rem; /* Golden ratio based */
      font-weight: 800;
      letter-spacing: -0.025em;
    }
    
    .brand-slogan {
      font-size: 0.8125rem;
      font-weight: 600;
      letter-spacing: 0.105em;
      margin-top: 5px;
    }
    
    .brand-text-container {
      gap: 4px;
      padding-top: 3px;
    }
  }
  
  
  
  /* 📱 Precise Responsive Adjustments */
  @media (max-width: 768px) {
    .brand-container {
      gap: 12px; /* Precise mobile spacing */
      max-width: 260px;
      min-height: 60px;
      padding: 8px 12px 8px 10px;
      border-radius: 16px;
    }
    
    .brand-logo-wrapper {
      width: 44px;
      height: 44px;
      border-radius: 12px;
    }
    
    .brand-logo-img {
      width: 28px;
      height: 28px;
    }
    
    .brand-name {
      font-size: 1.0625rem; /* Precise mobile scale */
      font-weight: 725;
      letter-spacing: -0.018em;
    }
    
    .brand-slogan {
      font-size: 0.625rem;
      font-weight: 525;
      letter-spacing: 0.085em;
      margin-top: 2px;
    }
    
    .brand-text-container {
      gap: 2px;
      padding-top: 1px;
    }
  }
  
  @media (max-width: 640px) {
    .brand-container {
      gap: 10px;
      max-width: 220px;
      min-height: 56px;
      padding: 6px 10px 6px 8px;
    }
    
    .brand-logo-wrapper {
      width: 40px;
      height: 40px;
      border-radius: 11px;
    }
    
    .brand-logo-img {
      width: 26px;
      height: 26px;
    }
    
    .brand-name {
      font-size: 0.9375rem;
      font-weight: 700;
    }
    
    .brand-slogan {
      font-size: 0.5625rem;
      letter-spacing: 0.08em;
    }
  }
  
  @media (max-width: 480px) {
    .brand-text-container {
      display: none;
    }
    
    .brand-container {
      max-width: 60px;
      min-height: 60px;
      padding: 6px;
      gap: 0;
      justify-content: center;
    }
    
    .brand-logo-wrapper {
      width: 48px;
      height: 48px;
      border-radius: 14px;
    }
    
    .brand-logo-img {
      width: 32px;
      height: 32px;
    }
  }
  
  /* Desktop Navigation Container */
  .desktop-nav {
    flex-shrink: 0;
  }
  
  /* 🕰️ Elegant Separator */
  .nav-separator {
    height: 40px;
    width: 1px;
    background: transparent;
    margin: 0 1rem;
    flex-shrink: 0;
    align-self: center;
    position: relative;
  }
  
  
  
  @media (min-width: 1024px) {
    .nav-separator {
      height: 44px;
      margin: 0 1.25rem;
    }
  }
  
  @media (min-width: 1280px) {
    .nav-separator {
      height: 48px;
      margin: 0 1.5rem;
    }
  }
  
  /* 🗺️ Sophisticated Navigation */
  .nav-link {
    display: flex;
    align-items: center;
    color: var(--slate-400);
    text-decoration: none;
    font-weight: 500;
    padding: 0.625rem 1rem;
    border-radius: 12px;
    position: relative;
    background: transparent;
    border: 1px solid transparent;
    min-height: 44px;
    white-space: nowrap;
    font-size: 0.9rem;
    overflow: hidden;
  }
  
  
  
  @media (min-width: 1024px) {
    .nav-link {
      padding: 0.75rem 1.25rem;
      min-height: 48px;
      font-size: 0.95rem;
    }
  }
  
  @media (min-width: 1280px) {
    .nav-link {
      padding: 0.875rem 1.5rem;
      min-height: 52px;
      font-size: 1rem;
    }
  }
  
  /* 🎯 Premium Active State */
  .nav-link-active {
    color: var(--slate-50) !important;
    background: transparent !important;
    border-color: transparent !important;
    position: relative;
  }
  
  
  
  .nav-link-active svg {
    color: var(--emerald-400) !important;
  }
  
  .nav-link:hover {
    color: var(--slate-50);
    background: transparent;
    border-color: transparent;
  }
  
  .nav-link svg {
  }
  
  .nav-link:hover svg {
    color: var(--emerald-400);
  }
  
  /* 📱 Refined Mobile Navigation */
  .nav-link-mobile {
    display: flex;
    align-items: center;
    color: var(--slate-300);
    text-decoration: none;
    font-weight: 500;
    padding: 1rem 1.5rem;
    border-radius: 16px;
    margin-bottom: 0.75rem;
    background: transparent;
    border: 1px solid transparent;
    min-height: 52px;
    position: relative;
    overflow: hidden;
  }
  
  
  .mobile-menu-container {
    background: var(--glass-secondary);
    backdrop-filter: blur(24px) saturate(1.2);
    border-top: 1px solid rgba(0, 212, 170, 0.15);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }

  /* Asegurar que el menú móvil esté oculto en desktop */
  @media (min-width: 1024px) {
    .mobile-menu-container {
      display: none !important;
    }
  }
  
  .nav-link-mobile:hover {
    color: var(--slate-50);
    background: transparent;
    border-color: transparent;
  }
  
  
  .nav-link-mobile.nav-link-active {
    color: var(--slate-50);
    background: transparent;
    border-color: transparent;
  }
  
  
  .nav-link-mobile svg {
  }
  
  .nav-link-mobile:hover svg,
  .nav-link-mobile.nav-link-active svg {
    color: var(--emerald-400);
  }
  
  .nav-link-mobile svg {
    transition: all var(--transition-base);
  }
  
  .nav-link-mobile:hover svg {
    color: var(--accent-500);
    transform: scale(1.1);
  }
  
  /* Enhanced Button Styles */
  .hover-glow {
    position: relative;
    overflow: hidden;
  }
  
  .hover-glow::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s;
  }
  
  .hover-glow:hover::before {
    left: 100%;
  }
  
  .hover-glow:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 229, 160, 0.4);
  }
  
  /* 🌊 Precisely Calibrated Scroll Animations */
  .header-scrolled .brand-logo-img {
    transform: scale(1);
  }
  
  .header-scrolled .brand-container {
    min-height: 60px; /* Precise collapsed height */
    padding: 8px 14px 8px 10px; /* Refined scroll padding */
    background: linear-gradient(135deg, 
      rgba(0, 212, 170, 0.04) 0%, 
      rgba(0, 102, 255, 0.025) 60%,
      rgba(255, 255, 255, 0.01) 100%);
    gap: 12px; /* Maintained spacing relationship */
  }
  
  .header-scrolled .brand-logo-wrapper {
    width: 42px; /* Precisely calculated scroll size */
    height: 42px;
    border-radius: 12px;
    background: linear-gradient(135deg, 
      rgba(0, 212, 170, 0.1) 0%, 
      rgba(0, 102, 255, 0.06) 45%,
      rgba(255, 255, 255, 0.02) 100%);
  }
  
  .header-scrolled .brand-logo-img {
    width: 28px;
    height: 28px;
  }
  
  .header-scrolled .brand-name {
    font-size: 1.125rem; /* Refined scroll typography scale */
    font-weight: 750;
    letter-spacing: -0.018em;
    background: linear-gradient(135deg, 
      #F8FAFC 0%, 
      #4DE2C7 25%,
      #E2E8F0 50%,
      #3380FF 75%,
      #F8FAFC 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    background-size: 150% 100%;
  }
  
  .header-scrolled .brand-slogan {
    font-size: 0.625rem; /* Proportional scroll slogan */
    font-weight: 550;
    letter-spacing: 0.09em;
    margin-top: 2px;
    background: linear-gradient(92deg, 
      #1ADBB5 0%, 
      #00D4AA 40%,
      #3380FF 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    background-size: 120% 100%;
    opacity: 0.9;
  }
  
  .header-scrolled .brand-text-container {
    gap: 1px;
    padding-top: 1px;
  }
  
  @media (min-width: 1024px) {
    .header-scrolled .brand-container {
      min-height: 64px;
      padding: 10px 16px 10px 12px;
      gap: 14px;
    }
    
    .header-scrolled .brand-logo-wrapper {
      width: 48px; /* Precise desktop scroll size */
      height: 48px;
      border-radius: 14px;
    }
    
    .header-scrolled .brand-logo-img {
      width: 32px;
      height: 32px;
      transform: scale(1);
    }
    
    .header-scrolled .brand-name {
      font-size: 1.25rem;
      font-weight: 775;
      letter-spacing: -0.02em;
    }
    
    .header-scrolled .brand-slogan {
      font-size: 0.6875rem;
      font-weight: 575;
      letter-spacing: 0.095em;
      margin-top: 3px;
    }
    
    .header-scrolled .brand-text-container {
      gap: 2px;
      padding-top: 2px;
    }
  }
  
  @media (min-width: 1280px) {
    .header-scrolled .brand-container {
      min-height: 68px;
      padding: 12px 18px 12px 14px;
      gap: 16px;
    }
    
    .header-scrolled .brand-logo-wrapper {
      width: 52px;
      height: 52px;
      border-radius: 16px;
    }
    
    .header-scrolled .brand-logo-img {
      width: 36px;
      height: 36px;
      transform: scale(1);
    }
    
    .header-scrolled .brand-name {
      font-size: 1.3125rem;
      font-weight: 800;
      letter-spacing: -0.022em;
    }
    
    .header-scrolled .brand-slogan {
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      margin-top: 4px;
    }
  }
  
  @media (max-width: 768px) {
    .header-scrolled .brand-logo-img {
      transform: scale(1);
    }
    
    .header-scrolled .brand-container {
      min-height: 48px;
    }
    
    .header-scrolled .brand-logo-wrapper {
      width: 40px;
      height: 40px;
    }
    
    .header-scrolled .brand-name {
      font-size: 1rem;
    }
    
    .header-scrolled .brand-slogan {
      font-size: 0.625rem;
    }
  }
  
  @media (max-width: 480px) {
    .header-scrolled .brand-container {
      min-height: 48px;
    }
    
    .header-scrolled .brand-logo-wrapper {
      width: 42px;
      height: 42px;
    }
  }
  
  /* 🌍 Premium Mobile Menu Button */
  .mobile-menu-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 48px;
    min-height: 48px;
    padding: 0.875rem;
    border-radius: 16px;
    background: rgba(0, 212, 170, 0.08);
    border: 1px solid rgba(0, 212, 170, 0.15);
    position: relative;
    overflow: hidden;
    flex-shrink: 0;
    transition: all var(--transition-base);
    cursor: pointer;
  }

  /* Ocultar en desktop (1024px y más) */
  @media (min-width: 1024px) {
    .mobile-menu-btn {
      display: none !important;
    }
  }

  /* Mostrar solo en móviles y tablets */
  @media (max-width: 1023px) {
    .mobile-menu-btn {
      display: flex;
    }
  }
  
  
  .mobile-menu-btn:hover {
    background: rgba(0, 212, 170, 0.15);
    border-color: rgba(0, 212, 170, 0.3);
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 212, 170, 0.2);
  }

  .mobile-menu-btn:active {
    transform: scale(0.95);
    background: rgba(0, 212, 170, 0.2);
  }
  
  
  .mobile-menu-btn svg {
    width: 24px;
    height: 24px;
    color: var(--emerald-400);
    z-index: 1;
    position: relative;
    transition: all var(--transition-fast);
  }
  
  .mobile-menu-btn:hover svg {
    transform: scale(1.1);
    filter: drop-shadow(0 2px 4px rgba(0, 212, 170, 0.3));
  }
  
  /* 🚀 Premium Mobile CTA */
  .mobile-cta-container {
    border-top: 1px solid rgba(0, 212, 170, 0.15);
    padding-top: 2rem;
    margin-top: 1rem;
    position: relative;
  }
  
  .mobile-cta-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    height: 1px;
    background: linear-gradient(90deg, 
      transparent, 
      var(--emerald-400), 
      var(--sapphire-400), 
      var(--emerald-400), 
      transparent);
  }
  
  .mobile-cta-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    min-height: 56px;
    padding: 1rem 2rem;
    background: linear-gradient(135deg, 
      var(--emerald-500) 0%, 
      var(--sapphire-500) 50%, 
      var(--emerald-400) 100%);
    color: var(--slate-900);
    font-weight: 700;
    font-size: 1rem;
    border-radius: 16px;
    text-decoration: none;
    transition: all 0.4s cubic-bezier(0.25, 0.1, 0.25, 1);
    position: relative;
    overflow: hidden;
    box-shadow: 
      0 8px 25px rgba(0, 212, 170, 0.3),
      0 4px 12px rgba(0, 102, 255, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .mobile-cta-btn:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 
      0 15px 40px rgba(0, 212, 170, 0.4),
      0 8px 20px rgba(0, 102, 255, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
    background: linear-gradient(135deg, 
      var(--emerald-400) 0%, 
      var(--sapphire-400) 50%, 
      var(--emerald-300) 100%);
  }
  
  .mobile-cta-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(255, 255, 255, 0.3), 
      transparent);
    transition: left 0.8s cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  
  .mobile-cta-btn:hover::before {
    left: 100%;
  }
  
  .mobile-cta-btn svg {
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
    transition: all 0.3s ease;
  }
  
  .mobile-cta-btn:hover svg {
    transform: scale(1.1);
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
  }
  
  /* Enhanced accessibility focus styles */
  .nav-link:focus-visible,
  .nav-link-mobile:focus-visible {
    outline: none;
    box-shadow: none;
  }
  
  #mobile-menu-btn:focus-visible {
    outline: none;
  }
  
  /* Footer Links */
  .footer-link {
    color: var(--text-muted);
    text-decoration: none;
    transition: color var(--transition-base);
    font-size: var(--text-sm);
  }
  
  .footer-link:hover {
    color: var(--accent-500);
  }
  
  /* Smooth animations for better performance */
  @media (prefers-reduced-motion: reduce) {
    .nav-link,
    .nav-link-mobile,
    .logo-img,
    .header-optimized {
      transition: none;
    }
  }
  
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .nav-link-active {
      border-width: 2px;
      background: rgba(0, 229, 160, 0.2);
    }
    
    .nav-link-mobile.nav-link-active::before {
      width: 6px;
    }
  }
</style>